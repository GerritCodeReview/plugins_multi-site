{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "04a19afe_f263e812",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-20T17:23:19Z",
      "side": 1,
      "message": "We have to wait for global-refdb release to be able to merge this change",
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "237e34f5_9d0cdf38",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-20T17:55:06Z",
      "side": 1,
      "message": "Tested E2E locally",
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7379094_8f98f611",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 89,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-01-21T10:57:06Z",
      "side": 1,
      "message": "This won\u0027t compile when we switch to global-refdb 3.3.1[1]\n\nWe need to add , pluginname to SharedRefDbConfiguration.\n\n[1]https://review.gerrithub.io/c/GerritForge/global-refdb/+/509265/5",
      "range": {
        "startLine": 88,
        "startChar": 0,
        "endLine": 89,
        "endChar": 100
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e11dab6_5f1d229e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-01-20T18:28:29Z",
      "side": 1,
      "message": "What is the use case for setting the metrics prefix in multi-site to something other than \"multi-site\"?",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b89fa634_776718a9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-21T08:40:57Z",
      "side": 1,
      "message": "I believe we already had that discussion during the code migration and we decided that only plugins should expose documentation:\nhttps://review.gerrithub.io/c/GerritForge/global-refdb/+/503713/1..2/src/main/resources/Documentation/config.md",
      "parentUuid": "4e11dab6_5f1d229e",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6a68e58_0bcf5229",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-21T08:49:51Z",
      "side": 1,
      "message": "Sorry for my previous comment, should go to the different change.",
      "parentUuid": "b89fa634_776718a9",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31a7b54a_d16e584c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-21T08:52:39Z",
      "side": 1,
      "message": "For example if you have ha plugin and multi-site and you want to have a single metric. In this case for both HA and multi-site we can put something like \u0027global-refdb\u0027. Without that we will always have separate metrics.",
      "parentUuid": "a6a68e58_0bcf5229",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "569ab355_4a0b47b1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-01-21T09:04:03Z",
      "side": 1,
      "message": "\u003e For example if you have ha plugin and multi-site and you want to have a single metric.\n\u003e In this case for both HA and multi-site we can put something like \u0027global-refdb\u0027. Without that we will always have separate metrics.\n\nI understand, that\u0027s a good point, but what would be the reason behind wanting the same metric?\nWhat advantage would it give? Wouldn\u0027t it just make it more difficult to triage any problem?\n\nI think is always useful to know where split brain generated, having one metric only would clobber that.",
      "parentUuid": "31a7b54a_d16e584c",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d2c1942_e98622ca",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-01-21T09:53:59Z",
      "side": 1,
      "message": "We just want to add this flexibility to the user. I can imagine some organisations where setting up new alerts take some time so they prefer to reuse existing one and have alerting working.\n\nThis isn\u0027t mandatory parameter and I agree 99% of time will be leave as a default",
      "parentUuid": "569ab355_4a0b47b1",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3128dff6_bba7b4ab",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 2
      },
      "lineNbr": 144,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-01-21T10:57:06Z",
      "side": 1,
      "message": "If this is not a requirement and we actually think it will make life more difficult because of the lost of visibility on the origin of the split brain, I don\u0027t think we should enable this feature.\n\nAlso, have you tried if this is actually possible?\n\nI believe what would happen is that high-availability and multi-site (if they were to use the same prefix) would both try to register a new metric with the same name and this will fail.\n\nI made a comment here[1] where I think the problem would arise.\n\n[1]https://review.gerrithub.io/c/GerritForge/global-refdb/+/509265/comment/0c94ea9a_366c3de9/",
      "parentUuid": "4d2c1942_e98622ca",
      "range": {
        "startLine": 144,
        "startChar": 0,
        "endLine": 144,
        "endChar": 56
      },
      "revId": "24f2ad53e6277ea0163b55486fc5f8c2aeebcb8a",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}