{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "90d69369_b40d9918",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-03-19T01:26:44Z",
      "side": 1,
      "message": "@Sa≈°a what do you think on the testing approach? I have verified that *IF* I change again the cache key of the projects cache, the test fails because the invalidation doesn\u0027t reach the project cache key.",
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ec490f0_92afc15d",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-19T08:28:48Z",
      "side": 1,
      "message": "Seems a bit generic, should we clarify the intent of this duration?\nis this waiting for the cache eviction to happen?\nCACHE_EVICTION_TIMEOUT, perhaps?\n\nAlso, 10 seconds seems a bit too much?",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 48,
        "endChar": 48
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a825aad1_5ee4327f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-03-19T10:11:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9ec490f0_92afc15d",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 48,
        "endChar": 48
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3759d98c_3fbf083a",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-19T08:28:48Z",
      "side": 1,
      "message": "This class being static, does it allow tests to run in parallel?\n\n\u0027cacheEvictions\u0027 is a concurrent hashmap, but still cacheEvictions content might be changed by another test running in parallel, effectively making tests interfering with each other?",
      "range": {
        "startLine": 65,
        "startChar": 2,
        "endLine": 65,
        "endChar": 39
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24682084_45c4fc2e",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 65,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-03-19T10:11:55Z",
      "side": 1,
      "message": "Bazel does the sandbox isolation when running tests in parallel AFAIK.\nTest are never run multithreaded unless you explicitly design them to run in that way.",
      "parentUuid": "3759d98c_3fbf083a",
      "range": {
        "startLine": 65,
        "startChar": 2,
        "endLine": 65,
        "endChar": 39
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6f9e838_c8006446",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-19T08:28:48Z",
      "side": 1,
      "message": "Don\u0027t we know precisely how many cache evictions for the project cache should be triggered?",
      "range": {
        "startLine": 100,
        "startChar": 78,
        "endLine": 100,
        "endChar": 82
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "009492f4_e119ac11",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-03-19T10:11:55Z",
      "side": 1,
      "message": "That isn\u0027t really relevant to the test here: we want to make sure that the eviction is called, but we are not testing how the eviction process is implemented.\n\nOne test should fail for just one reason, which is the intent of the test expressed by its name \"shouldEvictProjectCache\".\n\nOne thing that could be useful instead would be asserting that the eviction should be specific to the \u0027project\u0027, which it would be relevant. Let me address that concern in the next PS.",
      "parentUuid": "f6f9e838_c8006446",
      "range": {
        "startLine": 100,
        "startChar": 78,
        "endLine": 100,
        "endChar": 82
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7a170210_c8539e74",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-03-19T10:43:49Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "009492f4_e119ac11",
      "range": {
        "startLine": 100,
        "startChar": 78,
        "endLine": 100,
        "endChar": 82
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "16d4fa8a_e1764aaa",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/forwarder/ForwardedCacheEvictionHandlerIT.java",
        "patchSetId": 1
      },
      "lineNbr": 100,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-03-19T12:03:39Z",
      "side": 1,
      "message": "Done, now I do assert also that the entry evicted is the one that has been routed for eviction.",
      "parentUuid": "7a170210_c8539e74",
      "range": {
        "startLine": 100,
        "startChar": 78,
        "endLine": 100,
        "endChar": 82
      },
      "revId": "9b79170b9c9b8d665e162c849138123a9a127af4",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}