{
  "comments": [
    {
      "key": {
        "uuid": "029b8ef9_8e48de05",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 1,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-09T22:02:30Z",
      "side": 1,
      "message": "2019",
      "range": {
        "startLine": 1,
        "startChar": 17,
        "endLine": 1,
        "endChar": 21
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc03bcc6_a126b8c9",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-09T22:02:30Z",
      "side": 1,
      "message": "and is not ending with \u0027/meta\u0027.\nThe refs/changes/NN/NNNN/PP/meta is mutable :-(",
      "range": {
        "startLine": 87,
        "startChar": 11,
        "endLine": 87,
        "endChar": 45
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7caf604_66f3cdfa",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 87,
      "author": {
        "id": 1059414
      },
      "writtenOn": "2019-03-10T19:22:41Z",
      "side": 1,
      "message": "Ah, great thanks. I need to check all the possible non mutable options actually!!",
      "parentUuid": "fc03bcc6_a126b8c9",
      "range": {
        "startLine": 87,
        "startChar": 11,
        "endLine": 87,
        "endChar": 45
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9f8a58c_f93e15d3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 106,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Would it make sense to add a more specific ValidatioExpection to distinguish between this case and the one at line 94?",
      "range": {
        "startLine": 106,
        "startChar": 16,
        "endLine": 106,
        "endChar": 35
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1596032a_929723a1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-09T23:23:00Z",
      "side": 1,
      "message": "Wrong: if should be the old ref from the local repo",
      "range": {
        "startLine": 119,
        "startChar": 62,
        "endLine": 119,
        "endChar": 89
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb86a5f7_abbdc178",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/InSyncChangeValidator.java",
        "patchSetId": 7
      },
      "lineNbr": 119,
      "author": {
        "id": 1059414
      },
      "writtenOn": "2019-03-10T19:18:53Z",
      "side": 1,
      "message": "Ok, I think this was my mistake. I assumed that was the old ref from the local repo. I might have to browse the repo then.",
      "parentUuid": "1596032a_929723a1",
      "range": {
        "startLine": 119,
        "startChar": 62,
        "endLine": 119,
        "endChar": 89
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4451fbf_7bc1504a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/ValidationModule.java",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-11T06:47:51Z",
      "side": 1,
      "message": "These should not be hardcoded in the ValidationModule but rather injected in the InMemoryDfsRefDatabase.\n\nJust use a bind(DfsRefDatabase.class).to(InMemoryDfsRefDatabase.class) and then rely on  Guice to make it a singleton and inject the parameters.",
      "range": {
        "startLine": 33,
        "startChar": 8,
        "endLine": 37,
        "endChar": 22
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c485ba7d_a3ece4ea",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/DfsRefDatabase.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-09T22:02:30Z",
      "side": 1,
      "message": "DfsRefDatabase is a JGit interface, what is the value of redefining it here?",
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10c2f97d_43d5f9d2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/DfsRefDatabase.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1059414
      },
      "writtenOn": "2019-03-10T19:18:53Z",
      "side": 1,
      "message": "Ah, didn\u0027t know. Actually this interface is probably very different to that one. I will have a look but I think the operations we need are different. One can be based on the other but the three interactions I think we need are the ones below",
      "parentUuid": "c485ba7d_a3ece4ea",
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3d4ffe7_92f44260",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/DfsRefDatabase.java",
        "patchSetId": 7
      },
      "lineNbr": 45,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Does this method set a CREATED (i.e.: not DELETED) state for the ref? Is it worth mentioning it in the doc? Which one are the possible states for the ref? If there are several it might be worth describing the possible transactions.",
      "range": {
        "startLine": 45,
        "startChar": 2,
        "endLine": 45,
        "endChar": 78
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7a6bbebc_14fedd78",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabase.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-09T22:02:30Z",
      "side": 1,
      "message": "MemRefDatabase already exists in JGit, what is the value of defining it again?",
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2edef13_a9bb477e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabase.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1059414
      },
      "writtenOn": "2019-03-10T19:18:53Z",
      "side": 1,
      "message": "Same as above. Mine was bad naming so the error is consistent",
      "parentUuid": "7a6bbebc_14fedd78",
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be4585bf_05b3f518",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseCleaner.java",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-03-11T06:47:51Z",
      "side": 1,
      "message": "The cleanup of shared refs is a different problem, we should address this into a separate change.",
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e886b809_d2f849e7",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseCleanerTest.java",
        "patchSetId": 7
      },
      "lineNbr": 59,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Can we abstract this in a helper method, maybe something like sequentialId?\n\nI believe that trying to figure out what it is doing drives your attention away from what the test is trying to do.",
      "range": {
        "startLine": 59,
        "startChar": 32,
        "endLine": 59,
        "endChar": 72
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "047cdd27_0e7a2afe",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseCleanerTest.java",
        "patchSetId": 7
      },
      "lineNbr": 79,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Do we need to delete here? Can we just return from the test with a failure?",
      "range": {
        "startLine": 79,
        "startChar": 16,
        "endLine": 79,
        "endChar": 46
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68cf4f78_6a8ba5af",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseTest.java",
        "patchSetId": 7
      },
      "lineNbr": 61,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Is there a gerRef we can use to make sure the ref has been deleted instead of deleting twice?",
      "range": {
        "startLine": 61,
        "startChar": 26,
        "endLine": 61,
        "endChar": 35
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9b1d1a48_05953106",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseTest.java",
        "patchSetId": 7
      },
      "lineNbr": 69,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "Would it also make sense to check that OBJECT_ID_1 is no more in the DB while OBJECT_ID_2 has been added? If updateRefId had a bug that always return \u0027true\u0027 we wouldn\u0027t catch it.",
      "range": {
        "startLine": 69,
        "startChar": 12,
        "endLine": 69,
        "endChar": 81
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "476c854e_c1487bd9",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/multisite/validation/dfsrefdb/memory/InMemoryDfsRefDatabaseTest.java",
        "patchSetId": 7
      },
      "lineNbr": 86,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-03-11T10:37:17Z",
      "side": 1,
      "message": "same as line 69",
      "range": {
        "startLine": 86,
        "startChar": 12,
        "endLine": 86,
        "endChar": 82
      },
      "revId": "3c531b83d0fec90137b7ac998260b3e8ad0707ce",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}