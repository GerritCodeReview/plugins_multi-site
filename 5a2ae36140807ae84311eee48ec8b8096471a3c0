{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "17544b31_fa8597a0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "That\u0027s not associated with Issue 14509, where we were aiming to have a TestContainer-based integration test.",
      "range": {
        "startLine": 9,
        "startChar": 40,
        "endLine": 9,
        "endChar": 66
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46444073_af6e26e8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 10,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "We already have a Gatling-based E2E tests: can you explain the value added compared to the tests already written by Ericsson?\n\nWe also had a docker-compose environment and it was removed with Change-Id: I2f3ad4a. What\u0027s the purpose of resuming it?",
      "range": {
        "startLine": 10,
        "startChar": 7,
        "endLine": 10,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4dcb9982_ec41fe4f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "Running this, exactly fails for me with:\n\n```\nERROR: .FileNotFoundError: [Errno 2] No such file or directory: \u0027./docker-compose.yaml\u0027\n```\n\nIt seems that the script has to be run from the e2e-tests directory?",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecec6d98_e21fcd50",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "TBH called it exclusively from there - now realised that it is not ready to be called from root dir - thanks for catching it ;)",
      "parentUuid": "4dcb9982_ec41fe4f",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6d5f200e_a5ff214e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ecec6d98_e21fcd50",
      "range": {
        "startLine": 12,
        "startChar": 0,
        "endLine": 12,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27a26dd9_37931795",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "We already have the docker-based environment for manual verification. What is this supposed to add? Can you explain that in the commit message?",
      "range": {
        "startLine": 14,
        "startChar": 28,
        "endLine": 14,
        "endChar": 47
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d1dc9de_d2cc1bc9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "Nit: it should be\nBug: Issue 14509",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 25,
        "endChar": 10
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46b6cbae_f630b6d3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 25,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:25:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d1dc9de_d2cc1bc9",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 25,
        "endChar": 10
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae86704b_38d56ec3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "Thanks Jacek! üòä\n\nI ran this locally and the environment does start up (see my comments in this CR for where I had problems/issues).\n\nOn top of those (little) technical concerns, I have one, larger directional one üòä\n\nUp until recently we had a dockerized environment, which was ditched by this CR[1]\n\nThis change is kind of resuming that approach.\n\nPerhaps this is what we want, on the light of our new requirements, but I would like to highlight that we are re-introducing something we ditched just few months ago, so I think it\u0027s worth mentioning.\n\n@ponch, @luca, @marcin are we all on the same page this is the direction we want to go?\n\n[1]https://gerrit-review.googlesource.com/c/plugins/multi-site/+/305588",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2a44ce3_5432ec15",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "I would argue that it is way simpler (and faster) than the approach you mentioned as there is no single Dockerfile (it uses existing images/libraries) and it uses config files developed for `setup_local_env` IOW they are maintained ;)\n\nRegardless we have two options:\n1. continue this approach and add simple cases that would confirm the healthiness of this setup\n2. move this configuration to the testcontainers environment and do the tests there (if that is even doable ;)) - frankly can\u0027t imagine going there without being here first as the setup is non-trivial :D",
      "parentUuid": "ae86704b_38d56ec3",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "39a0169c_78708d14",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "Thanks for the feedback @Tony - let\u0027s discuss it after daily.",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fd778b87_0a4a0bfc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "Yes absolutely,\nI think moving to test containers would be premature at this stage.\n\nJust to be clear. I think this approach is valid: having a e2e test is different, conceptually, from what [1] was trying to achieve, which was more a development environment.\n\nI just thought about bringing to everyone\u0027s attention that a (recently removed) dockerized environment is being introduced.",
      "parentUuid": "d2a44ce3_5432ec15",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0da4443b_e1d6e778",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "I believe this is a duplicate of what we already have: shall we have a talk about it tomorrow? I don\u0027t see so much value in continuing in reviewing this and burn everyone\u0027s time on it.",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "353397bc_36faf2de",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-22T23:31:15Z",
      "side": 1,
      "message": "Resetting my -2 after the joint discussion today.",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0dd722fa_0d8b42b3",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 4,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "That\u0027s not the purpose of this change: we already have a manual setup, we do need an automated one that can be run on the CI.",
      "range": {
        "startLine": 4,
        "startChar": 5,
        "endLine": 4,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5220efac_672b1a5c",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 9,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-07-20T13:43:45Z",
      "side": 1,
      "message": "This is actually needed. I am not saying in this change, but we need to keep it in mind when laying down the bases since the final purpose is having an easy way of doing integration tests with the different components, hence different brokers.\n\nJust to give a bit more of context, this ticket, meant to be set of tickets, was created after some breakage that were unnoticed while changing the broker API. We ended up having multi-site working with only a subset of brokers for a given Gerrit version.",
      "range": {
        "startLine": 8,
        "startChar": 65,
        "endLine": 9,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4385206a_cab8a2e2",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "That\u0027s not what the issue is about: how can that be automated? That\u0027s the problem and what we were supposed to resolve.",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 43,
        "endChar": 2
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10062835_7a632a09",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:22:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4385206a_cab8a2e2",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 43,
        "endChar": 2
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6cef86b9_17388c0a",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "I am not sure we actually need the replication.jar",
      "range": {
        "startLine": 48,
        "startChar": 37,
        "endLine": 48,
        "endChar": 59
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9745a28a_d4382c3f",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "We do - otherwise `mutli-site` doesn\u0027t load (it uses lib module from it) - that alone (if cannot be get rid off) is a huge complication on setting it up in the testcontainers...",
      "parentUuid": "6cef86b9_17388c0a",
      "range": {
        "startLine": 48,
        "startChar": 37,
        "endLine": 48,
        "endChar": 59
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "982f4a40_df86b6b6",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "see my comment above, the replication.jar already exists in the gerrit docker container",
      "parentUuid": "9745a28a_d4382c3f",
      "range": {
        "startLine": 48,
        "startChar": 37,
        "endLine": 48,
        "endChar": 59
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c3008b7_cd21a7ee",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "982f4a40_df86b6b6",
      "range": {
        "startLine": 48,
        "startChar": 37,
        "endLine": 48,
        "endChar": 59
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86d5e418_be5d8f55",
        "filename": "e2e-tests/README.md",
        "patchSetId": 2
      },
      "lineNbr": 48,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "we can get it from the container itself (without event starting it) with the following commands:\n\n  CONTAINER_NAME\u003d$(docker create -ti --entrypoint /bin/bash gerritcodereview/gerrit:3.4.0-centos8) \u0026\u0026 \\\n  docker cp ${CONTAINER_NAME}:/var/gerrit/plugins/replication.jar /path/to/destination\n  docker rm -fv ${CONTAINER_NAME}",
      "parentUuid": "5c3008b7_cd21a7ee",
      "range": {
        "startLine": 48,
        "startChar": 37,
        "endLine": 48,
        "endChar": 59
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86714fa1_331996e0",
        "filename": "e2e-tests/docker-compose-kafka.yaml",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "Why a separate file and not included in docker-compose.yaml?",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e5a2c126_cfcd1056",
        "filename": "e2e-tests/docker-compose-kafka.yaml",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "in case we would like to test it against the different broker it will be added when different one would be chosen",
      "parentUuid": "86714fa1_331996e0",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77c49624_7f9baa4b",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T10:32:25Z",
      "side": 1,
      "message": "We have to keep in mind that the final goal of this script is to run e2e tests within a CI environment and I am not sure how this would run in this context.\n\nThese ports cannot be statically allocated, because we don\u0027t have control on which ports will be available in Jenkins at the time of running.\n\nI wonder if we need to expose anything at all?\n\nIf we were to run the tests within a dedicated container, which is part of the docker-compose, then that container can access gerrit within the internal docker network, without needing to expose anything.\n\n\nWDYT?",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 17,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31614085_6c777925",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-07-20T13:43:45Z",
      "side": 1,
      "message": "I echo Tony on this. I recogn the ticket I wrote wasn\u0027t clear at all about what we were aiming with this ticket..there was nothing in the ticket üòê my bad. I think the final aim is to run the tests in the CI, as you also said. It is ok to have an intermediate state where we run the tests manually, but we should keep in mind constraint we might have when running the tests in the CI. Ports is one of these as Tony pointed out.\n\nI would try to \"seal\" the whole multi-site setup in a bunch of coordinated containers, without exposing any port, and interact with it, only via the tests (some placeholders are ok initially...just a curl to see gerrit is up and running is fine for the scope of this tickets IMO).\n\nTo find out the problem you might have when running the tests in the CI, I\u0027d try to use what you have done so far to explore how it would look like to run it in the CI so you can find out straight away what are the issues you might find out, i.e.: ports allocation.\n\nNot sure if those notes are of any help: https://kanbanflow.com/t/PQ4E3Ruj",
      "parentUuid": "77c49624_7f9baa4b",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 17,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a674360_eeba5654",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "The reason why we proposed to use TestContainers is because of the ability to run on a CI environment by dynamically allocating the ports. This approach with Docker compose doesn\u0027t achieve that.\n\nWe could actually get the best of both worlds by using sbt-docker-compose (see [1]) which allows to still rely on a docker-compose.yaml file but having the ports dynamically allocated. WDYT?\n\n[1] https://github.com/Tapad/sbt-docker-compose",
      "parentUuid": "31614085_6c777925",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 17,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dca6603c_b91a9aca",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "ports were moved to the `--manual` switch and as such they are no longer needed to be exposed for testing.",
      "parentUuid": "6a674360_eeba5654",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 17,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1ce326dd_06e2d00e",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 17,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:25:25Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dca6603c_b91a9aca",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 17,
        "endChar": 19
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "402fc1f3_60fb79db",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "if we don\u0027t have a load balancer I don\u0027t see any reason to set the canonical web URL to something other than the instance itself.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 47
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1ce9628_fc4570f2",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "402fc1f3_60fb79db",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 47
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1c565f4_321dc350",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "Do we really need this for the purpose of testing Gerrit multi-site?",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a93a07e_5d1b404e",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "yes we do - otherwise we need to take care of timeouts while gerrit starts ourselves",
      "parentUuid": "e1c565f4_321dc350",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69dab839_188d9f65",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-31T02:24:53Z",
      "side": 1,
      "message": "What are you expecting from docker-compose to do with this healthcheck? Docker-compose isn\u0027t K8s and won\u0027t really do anything with it, AFAIK.",
      "parentUuid": "4a93a07e_5d1b404e",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8b402e5_6879ff4f",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-31T08:13:02Z",
      "side": 1,
      "message": "it isn\u0027t the k8s but it will delay the start of the tester container until gerrit instance reports that it is healthy IOW I see the following benefits of this approach:\n* I don\u0027t have to write check-wait loop in order to do that in the test container IOW it is easier to maintain\n* we are adding healthcheck plugin verification which is IMHO part of the setup",
      "parentUuid": "69dab839_188d9f65",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63e0065b_9d5577dd",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-08-03T01:05:35Z",
      "side": 1,
      "message": "I wouldn\u0027t start building something on a deprecated feature of docker-compose: the depends_on was introduced back in v2.1 of docker-compose but then deprecated in v3 and later removed.",
      "parentUuid": "a8b402e5_6879ff4f",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5d23f95_f9655deb",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-08-12T10:49:35Z",
      "side": 1,
      "message": "I\u0027m probably checking sth wrong for `depends_on` as I can\u0027t see the deprecation note there (see [1]). Same for `healthcheck` - I can\u0027t see deprecation note there either (see [2]).\nAgain I can work it out to check in tests for both gerrit instances to start but if we agree on that let\u0027s do it in the follow up.\n\n[1] https://docs.docker.com/compose/compose-file/compose-file-v3/#depends_on\n[2] https://docs.docker.com/compose/compose-file/compose-file-v3/#healthcheck",
      "parentUuid": "63e0065b_9d5577dd",
      "range": {
        "startLine": 30,
        "startChar": 0,
        "endLine": 35,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c47d8df_2e3aa34a",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T10:23:17Z",
      "side": 1,
      "message": "This should probably be a variable, so that we can pass it via the Jenkins UI and choose which minor version to run.\n\nIn this case we could also be kept in sync with the version of gerrit to checkout when building the multi-site artifact.",
      "range": {
        "startLine": 38,
        "startChar": 35,
        "endLine": 38,
        "endChar": 40
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf3d8651_8e3917e7",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c47d8df_2e3aa34a",
      "range": {
        "startLine": 38,
        "startChar": 35,
        "endLine": 38,
        "endChar": 40
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2fed9f39_b04287ac",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "NFS?",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 55,
        "endChar": 37
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "863da882_39e8bb73",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "it is for websession-broker to share the session file - regardless there is no need for it to be a volume",
      "parentUuid": "2fed9f39_b04287ac",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 55,
        "endChar": 37
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb2c8e7a_0111231d",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-31T02:24:53Z",
      "side": 1,
      "message": "We do not use shared websessions over NFS or any other shared filesystem on multi-site.",
      "parentUuid": "863da882_39e8bb73",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 55,
        "endChar": 37
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3df45deb_b5986147",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-31T08:13:02Z",
      "side": 1,
      "message": "I was fooled by the following `setup_local_env/configs/gerrit.config` entry:\n\n  [plugin \"websession-flatfile\"]\n    directory \u003d $FAKE_NFS\n\nHaven\u0027t noticed that it actually mentions different plugin ;)",
      "parentUuid": "eb2c8e7a_0111231d",
      "range": {
        "startLine": 55,
        "startChar": 0,
        "endLine": 55,
        "endChar": 37
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "237032c6_4a25d5cf",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "Same as above: not needed.",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae82143e_96f31792",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 58,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "237032c6_4a25d5cf",
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "990f8efc_99631378",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "why 45s? is this based on something?",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "332abdae_ac8bde7a",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "it calls init first so it takes a bit of time... anyway it is a time when every 5s (with 5s timeout) instance is probed to see if it is already up... Could/Should be externalised so that it could be tailored to the env performance.",
      "parentUuid": "990f8efc_99631378",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9ccf8a1b_7e675c2c",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "Ack.\n\nThis is probably a good default, we can change it we find it necessary.",
      "parentUuid": "332abdae_ac8bde7a",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa1625c5_7c927327",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-31T02:24:53Z",
      "side": 1,
      "message": "The docker-compose health-check isn\u0027t even useful in this context: I believe we are adding a complexity that isn\u0027t really focused in testing multi-site here.",
      "parentUuid": "9ccf8a1b_7e675c2c",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4c74fbe_15ad6a93",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-31T08:13:02Z",
      "side": 1,
      "message": "Can you elaborate? AFAICT docker lets Gerrit start (note that `init` is performed first) the given amount of time and once the healthcheck results with `200` test container (that depends on that) is started... IMHO it is useful as it takes away the burden of doing that manually... so let\u0027s sync on that ;)",
      "parentUuid": "fa1625c5_7c927327",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b02171bd_cc072bf5",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-08-03T01:05:35Z",
      "side": 1,
      "message": "See above: the depends_on is deprecated in docker-compose.",
      "parentUuid": "b4c74fbe_15ad6a93",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41a91b2f_e92d6ee0",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-08-12T10:49:35Z",
      "side": 1,
      "message": "See above - can\u0027t see the deprecation notice there :/",
      "parentUuid": "b02171bd_cc072bf5",
      "range": {
        "startLine": 60,
        "startChar": 20,
        "endLine": 60,
        "endChar": 23
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e2037dac_30c52de2",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-20T23:24:03Z",
      "side": 1,
      "message": "What\u0027s the purpose of those volumes?",
      "range": {
        "startLine": 65,
        "startChar": 0,
        "endLine": 74,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4613940_e174e71f",
        "filename": "e2e-tests/docker-compose.yaml",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e2037dac_30c52de2",
      "range": {
        "startLine": 65,
        "startChar": 0,
        "endLine": 74,
        "endChar": 16
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d54fa1c4_81c75b6c",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "I can see a substantial overlap between this setup and the setup_local_env.sh one.\n\nI am thinking for example about the downloading of the essential components, the parsing of valid broker-types, etc.\n\nIs there anything at all that can be packaged into a library and re-used from both?",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "479662d3_0f0d6863",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "probably more - didn\u0027t want to do it now for clarity - let\u0027s do it as a follow up when change gets accepted :D",
      "parentUuid": "d54fa1c4_81c75b6c",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d29cfbd_ccf9fdaa",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "479662d3_0f0d6863",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5ce8d70_19674807",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-07-31T02:24:53Z",
      "side": 1,
      "message": "Reopening the issue: I do believe this is making the project less maintainable. The all purpose of this exercise was to have something that helps us making less mistakes in the future. Duplicating the manual setup is adding one more chance to make mistakes IMHO.",
      "parentUuid": "9d29cfbd_ccf9fdaa",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "672158aa_49f8a486",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 1,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-08-12T10:49:35Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e5ce8d70_19674807",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 11
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b18193a3_383f03ea",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "what\u0027s the rationale behind these defaults?\nIn my environment this points to a totally random directory in my home.",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 93
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ce46fc14_ca7b15a6",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "I guess that it boils down to how one builds (but more importantly how CI builds) the plugins... I\u0027m building in tree hence plugin is under gerrit/plugins/multi-site directory and regardless on how I call bazel build (from plugin or from gerrit) it always ends up in the directory mentioned. Obviously it would be good to know how are you and CI building it :D",
      "parentUuid": "b18193a3_383f03ea",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 93
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "934e8556_923e69b2",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "It\u0027s a good point actually, I realized I don\u0027t really have a good idea on how the relevant artifacts will land on the CI, when we build the jenkins job.\n\nI can think of two viable approaches:\n \n1 - is the idea to build the multi-site in-tree and then rung e2e tests against it?\n\nThe benefit of this is that we can validate e2e *before* merging a change.\n(there\u0027s nothing that would trigger this at the moment, so we would need to trigger the CI job on demand, when we think is necessary, I guess?).\n\n2 - we always run e2e on *stable* branches.\n\nIn this case, we do not need to provide the multi-site.jar, as it will always be downloaded from the CI.\nObviously we will not be able to test e2e feature and bug fixes *before*  they get merged.\n\nI think your approach is going for 1, right?",
      "parentUuid": "ce46fc14_ca7b15a6",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 93
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f8d1a3a_fcd9a48f",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-07-20T13:43:45Z",
      "side": 1,
      "message": "If approach #2 makes things much more easy, we could start we it, otherwise #1 seems to me more flexible, it would allow us to run the tests on a stable branch or before merging a change in a branch by injecting the artefact we want to test.",
      "parentUuid": "934e8556_923e69b2",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 93
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "187bde2f_e66b9e37",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:22:48Z",
      "side": 1,
      "message": "I guess this can be answered once I try to integrate it with bazel ;) but that obviously can only happen when you guys find any value in it :D",
      "parentUuid": "9f8d1a3a_fcd9a48f",
      "range": {
        "startLine": 23,
        "startChar": 0,
        "endLine": 24,
        "endChar": 93
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43ae93d3_627e8df5",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "Do we need this? we are not running any nginx right?",
      "range": {
        "startLine": 65,
        "startChar": 0,
        "endLine": 65,
        "endChar": 55
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a19615ff_7659d128",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 65,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "43ae93d3_627e8df5",
      "range": {
        "startLine": 65,
        "startChar": 0,
        "endLine": 65,
        "endChar": 55
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92c8be01_66866cd5",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-07-20T13:43:45Z",
      "side": 1,
      "message": "Do we need this to be configurable?",
      "range": {
        "startLine": 100,
        "startChar": 3,
        "endLine": 100,
        "endChar": 107
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "21028ae4_0037b8ed",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:22:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "92c8be01_66866cd5",
      "range": {
        "startLine": 100,
        "startChar": 3,
        "endLine": 100,
        "endChar": 107
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c75081f7_f426abd7",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "typo: replication",
      "range": {
        "startLine": 117,
        "startChar": 5,
        "endLine": 117,
        "endChar": 15
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "78941336_47163bfd",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 117,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c75081f7_f426abd7",
      "range": {
        "startLine": 117,
        "startChar": 5,
        "endLine": 117,
        "endChar": 15
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10275d36_e016d348",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "replication is a core plugin.\nWhat\u0027s the reason for having to provide it explicitly? Could it not just be downloaded by this script?",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 121,
        "endChar": 4
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d5fffd3_fdce33a7",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "core plugins are not exposed in the CI or maven :/ at least to my knowledge - if there is any way that we could get the replication plugin from CI it would simplify the setup (one way is to call init on the image and get the plugin from there but that seemed to be quite time expensive operation - yet if there is no other option it would have to be done this way to get rid off this complexity).",
      "parentUuid": "10275d36_e016d348",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 121,
        "endChar": 4
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14b87b10_d4f429e4",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "Yes, sorry for the confusion.\nThere\u0027s no need to download the replication plugin.\n\nWhat I should have said is: \n\nWhen running the gerritcodereview/gerrit:3.4.0-centos8, the replication plugin will already be present, since it is part of the gerrit core.\n\n\nI think we can remove the replication plugin altogether from the script.",
      "parentUuid": "8d5fffd3_fdce33a7",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 121,
        "endChar": 4
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cbefe5a8_a4f6ea08",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 121,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14b87b10_d4f429e4",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 121,
        "endChar": 4
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35cf28e7_331f45cd",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 234,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "nit: setup",
      "range": {
        "startLine": 234,
        "startChar": 8,
        "endLine": 234,
        "endChar": 13
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92ced6ba_0707d038",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 234,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "35cf28e7_331f45cd",
      "range": {
        "startLine": 234,
        "startChar": 8,
        "endLine": 234,
        "endChar": 13
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6708dac6_527b2a29",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 249,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T10:27:04Z",
      "side": 1,
      "message": "Should this be run on background?\nI would expect here to trigger the actual tests (whatever they are).\n\nIf we don\u0027t return the prompt that it would be difficult to trigger any additional script.",
      "range": {
        "startLine": 248,
        "startChar": 0,
        "endLine": 249,
        "endChar": 74
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a74022cc_42d919c8",
        "filename": "e2e-tests/test.sh",
        "patchSetId": 2
      },
      "lineNbr": 249,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:22:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6708dac6_527b2a29",
      "range": {
        "startLine": 248,
        "startChar": 0,
        "endLine": 249,
        "endChar": 74
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ff8441c0_d4ca7ef5",
        "filename": "setup_local_env/configs/gerrit.config",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-19T19:21:00Z",
      "side": 1,
      "message": "I haven\u0027t checked the details, but websessions are not shared between the two gerrits.\nI login in gerrit-1 and the session does not get propagated.\n\nI don\u0027t see anywhere that we install the websession-broker plugin, could you check that perhaps?",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 43,
        "endChar": 25
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4b3c0c7_e0de33a9",
        "filename": "setup_local_env/configs/gerrit.config",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-20T06:06:36Z",
      "side": 1,
      "message": "was wondering if we actually need it as there is no ha-proxy in this picture either... having said that it is a trivial step to add it and share over `fake-nfs` if you think that it is essential to the setup.",
      "parentUuid": "ff8441c0_d4ca7ef5",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 43,
        "endChar": 25
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "01dc51b2_fb0c4ee1",
        "filename": "setup_local_env/configs/gerrit.config",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-07-20T09:40:58Z",
      "side": 1,
      "message": "Yes I think the websession-broker would be an essential component for this setup, to be honest.\nIt a crucial part of multi-site and it is also affected by changes underlying the events-broker lib.",
      "parentUuid": "a4b3c0c7_e0de33a9",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 43,
        "endChar": 25
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fde6d232_b42c858b",
        "filename": "setup_local_env/configs/gerrit.config",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-07-30T21:14:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "01dc51b2_fb0c4ee1",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 43,
        "endChar": 25
      },
      "revId": "5a2ae36140807ae84311eee48ec8b8096471a3c0",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}