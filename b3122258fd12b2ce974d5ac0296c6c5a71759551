{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "49906e1a_c373f8ca",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-08T12:14:24Z",
      "side": 1,
      "message": "This will produce confusing log messages, since the logged package will point to `eventsbroker` not `multisite` plugin.",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47e3e7fd_03c7f9ce",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1063024
      },
      "writtenOn": "2023-11-10T16:39:28Z",
      "side": 1,
      "message": "Change looks fine, but errors are genuine. Do we need to bump the library?",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "20d78df7_13597e09",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-11T13:09:23Z",
      "side": 1,
      "message": "I do not understand the context / value of this change: haven\u0027t we discussed and agreed that the logging should be done by the wrapper? Did I miss any follow-up conversation?",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5014aaf0_f5bac518",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-08T12:14:24Z",
      "side": 1,
      "message": "nit: logging success with the _extenal_ `MessageLogger` will result in a log message from the `eventsbroker` plugin, not `multisite` (I mean the log source package will be reported as `eventsbroker`) which will be confusing when someone is analyzing the logs.",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d2525b2_1cc513e6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-11-08T16:30:31Z",
      "side": 1,
      "message": "it\u0027s not, as a wrapper is used. Example log:\n```\n[2023-11-08 16:18:37,201] [Forward-Stream-Event-1[java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@4a1fe9bc[Not completed, task \u003d java.util.concurrent.Executors$RunnableAdapter@74c14ace[Wrapped task \u003d com.google.gerrit.server.logging.LoggingContextAwareRunnable@34c57a60]]]] INFO  : PUBLISH gerrit_stream {\"submitter\":{\"name\":\"Administrator\",\"email\":\"admin@example.com\",\"username\":\"admin\"},\"refUpdate\":{\"oldRev\":\"288320aa153eda76a92fbd77a7f2d496221b74b2\",\"newRev\":\"ea96c2082f1dd1f2ef49c1d0194c70f131afa7bd\",\"refName\":\"refs/changes/21/21/meta\",\"project\":\"test-1\"},\"type\":\"ref-updated\",\"eventCreatedOn\":1699460316,\"instanceId\":\"instance-1\"}\n```",
      "parentUuid": "5014aaf0_f5bac518",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e604b7e9_d851af89",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-11T13:09:23Z",
      "side": 1,
      "message": "I maybe lacking context, but I don\u0027t understand why do we need to log on some other component\u0027s log.\n\nThe responsibility of logging what comes in/out of the message broker pipe is given to the events-broker wrapper, which is ðŸ˜Ž\n\nWhy does the multi-site plugin need to log explicitly? instead?",
      "parentUuid": "8d2525b2_1cc513e6",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71c11e6b_bada0ee1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 94,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2023-11-13T08:53:21Z",
      "side": 1,
      "message": "+1 I\u0027ve put similar comment in event-broker change\nhttps://gerrit-review.googlesource.com/c/modules/events-broker/+/391598/comments/8540aa47_b0132e01",
      "parentUuid": "e604b7e9_d851af89",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c29e194_d053bf1b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-08T12:14:24Z",
      "side": 1,
      "message": "nit: this may be something for a follow-up change, but shouldn\u0027t we use the same logging mechanism for success and failures?",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fd13587_7a813380",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-11-08T16:30:31Z",
      "side": 1,
      "message": "I am lacking context, so I cannot answer ðŸ˜ž perhaps other people will answer this. My guess: There was a desire to keep the `message_log` \"clean\", ie log only messages that were successfully published. At least I don\u0027t recall ever seeing errors logged in this file. Anything that\u0027s error, goes to the `error_log`.",
      "parentUuid": "2c29e194_d053bf1b",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "26948bda_c4be4cf4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/broker/BrokerApiWrapper.java",
        "patchSetId": 4
      },
      "lineNbr": 100,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-11T13:09:23Z",
      "side": 1,
      "message": "Agreed. All plugins log errors in Gerrit\u0027s error_log AFAIK.",
      "parentUuid": "5fd13587_7a813380",
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b83ed7e8_38d10c6c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/consumer/AbstractSubcriber.java",
        "patchSetId": 4
      },
      "lineNbr": 79,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-11T13:09:23Z",
      "side": 1,
      "message": "Why are we logging here? Shouldn\u0027t be the events-broker wrapper doing it?",
      "range": {
        "startLine": 79,
        "startChar": 0,
        "endLine": 79,
        "endChar": 66
      },
      "revId": "b3122258fd12b2ce974d5ac0296c6c5a71759551",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}