{
  "comments": [
    {
      "key": {
        "uuid": "8660f784_b44deef8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 6
      },
      "lineNbr": 66,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-06-15T21:31:30Z",
      "side": 1,
      "message": "Should this be in the Configuration class?",
      "range": {
        "startLine": 66,
        "startChar": 48,
        "endLine": 66,
        "endChar": 53
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a1bddf03_6cf15fbb",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 6
      },
      "lineNbr": 66,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-06-17T09:50:13Z",
      "side": 1,
      "message": "Sections for publisher and subscriber events are under \u0027kafka\u0027 section name. But Kafka is just one the \u0027transport protocol\u0027 unfortunately we cannot change it now because it will introduce incompatible change. For the next release we should have \u0027transport protocol\u0027 independent name like \u0027broker\u0027. That\u0027s why I\u0027ve decided to keep it here(not using it from KafkaConfiguration)",
      "parentUuid": "8660f784_b44deef8",
      "range": {
        "startLine": 66,
        "startChar": 48,
        "endLine": 66,
        "endChar": 53
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1d5a139_ba4fc4f1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 6
      },
      "lineNbr": 141,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-06-15T21:31:30Z",
      "side": 1,
      "message": "All of those should be the responsibility of the KafkaConfiguration, WDYT?",
      "range": {
        "startLine": 126,
        "startChar": 0,
        "endLine": 141,
        "endChar": 0
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "44354535_4df6253a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Configuration.java",
        "patchSetId": 6
      },
      "lineNbr": 141,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-06-17T09:50:13Z",
      "side": 1,
      "message": "My understanding was that Kafka is just \u0027transport protocol\u0027 and this configuration is generic because it\u0027s describing which event we are going to handle in the multi-site plugin no matter which \u0027transport protocol\u0027 we have decided to use. If that\u0027s true I think it should belong here. It will help us to manage events configuration in a single place so if we have multiple \u0027transport protocol\u0027 plugins and we want to disable/enable event we have to do it in one place not in every plugin. The default binding should be done to NoOp implementation and later replaced by \u0027transport protocol\u0027 plugin which in this case is Kafka.\nThis approach was also mentioned by Tiago in the comment for Patch Set 1. And I believe Configuration.SharedRefDatabase is following the same pattern.",
      "parentUuid": "e1d5a139_ba4fc4f1",
      "range": {
        "startLine": 126,
        "startChar": 0,
        "endLine": 141,
        "endChar": 0
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5722a331_35c7a123",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/KafkaConfiguration.java",
        "patchSetId": 6
      },
      "lineNbr": 49,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-06-15T21:31:30Z",
      "side": 1,
      "message": "This constant exists already in Configuration, why not reusing it?",
      "range": {
        "startLine": 49,
        "startChar": 2,
        "endLine": 49,
        "endChar": 65
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2da6d8b_9203f05f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/kafka/consumer/KafkaConsumerModule.java",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-06-15T21:31:30Z",
      "side": 1,
      "message": "KafkaConsumerModule should receive the KafkaConfiguration. However, because you have put kafka-specific methods in Configuration (back again ! They were removed just 2 commits ago) then you are forced to pass the general configuration, which is incorrect IMHO.",
      "range": {
        "startLine": 34,
        "startChar": 29,
        "endLine": 34,
        "endChar": 42
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e632fd11_2a7f761a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/kafka/consumer/KafkaConsumerModule.java",
        "patchSetId": 6
      },
      "lineNbr": 34,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2019-06-17T09:50:13Z",
      "side": 1,
      "message": "Already started similar discussion under one of the comments for the Configuration class. My understanding was that events configuration is \u0027transport protocol\u0027 independent that\u0027s why is in Configuration instead of KafkaConfiguration class",
      "parentUuid": "f2da6d8b_9203f05f",
      "range": {
        "startLine": 34,
        "startChar": 29,
        "endLine": 34,
        "endChar": 42
      },
      "revId": "e2343bb7e810c2bde580ba0b236aaf30996fe3d9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}