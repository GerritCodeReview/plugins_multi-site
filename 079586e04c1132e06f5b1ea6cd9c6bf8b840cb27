{
  "comments": [
    {
      "key": {
        "uuid": "9ecb7197_55b0a331",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Log4jSharedRefLogger.java",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-13T05:55:38Z",
      "side": 1,
      "message": "This is the only thing that isn\u0027t present when the objectType is a BLOB: can we just put a conditional to it, instead of having a copy\u0026paste of the whole thing?",
      "range": {
        "startLine": 76,
        "startChar": 24,
        "endLine": 77,
        "endChar": 50
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a503485_625f3bc7",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Log4jSharedRefLogger.java",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T10:15:23Z",
      "side": 1,
      "message": "I can factor out the common parts of the payload, but as I explain to your other comment I would like to model these two entries differently.\n\nWhat do you think?",
      "parentUuid": "9ecb7197_55b0a331",
      "range": {
        "startLine": 76,
        "startChar": 24,
        "endLine": 77,
        "endChar": 50
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c461887a_7c6bd62a",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Log4jSharedRefLogger.java",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T13:36:30Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "0a503485_625f3bc7",
      "range": {
        "startLine": 76,
        "startChar": 24,
        "endLine": 77,
        "endChar": 50
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a94776b_e7b9bb4e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/Log4jSharedRefLogger.java",
        "patchSetId": 3
      },
      "lineNbr": 77,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T13:45:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c461887a_7c6bd62a",
      "range": {
        "startLine": 76,
        "startChar": 24,
        "endLine": 77,
        "endChar": 50
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "af3421f2_294b489c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-13T05:55:38Z",
      "side": 1,
      "message": "Updating a blob means still updating a ref, isn\u0027t it?",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "960f68e9_429ac1d3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T10:15:23Z",
      "side": 1,
      "message": "I thought it was beneficial to model this as a different entity, as it stands for a different type of update: these updates do not have a commit associated, nor a comment, so the payload of this log entry needs to be different, and I\u0027d like to avoid to use @nullable or optionals.\n\nIt will be clearer to the reader, that the ref updated is not a commit.\n\nDo you have any suggestion for a better naming?\nHow about\n\nREF_UPDATE_COMMIT\nREF_UPDATE_BLOB\n\nboth of them are ref updates, but the associated object is of a different type\n\nWDYT?",
      "parentUuid": "af3421f2_294b489c",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e22c1a52_9d3c2975",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-13T10:34:32Z",
      "side": 1,
      "message": "Let\u0027s not forget the purpose of a ref-log: just tracking the status transitions of the refs, not the whole repo.\n\nTracking the old SHA1, new SHA1 and the type (BLOB vs. COMMIT) would be more than enough.",
      "parentUuid": "960f68e9_429ac1d3",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad11c555_6703b3ab",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T11:03:27Z",
      "side": 1,
      "message": "Yep, agreed,\nbut we also decided[1] to hydrate that transition with some useful data (on the blueprint of reflog, similar to what message_log does).\nThis is already in stable-2.16.\n\nAre you suggesting that we now remove that extra info and leave only \"SHA1, new SHA1 and the type (BLOB vs. COMMIT)\"?\n\nLogging REF_UPDATE_BLOB does not require extra information, just less of it, I struggle to understand why we\u0027d want to remove useful information from REF_UPDATE_COMMIT, which is already there.\n\n\n[1] https://bugs.chromium.org/p/gerrit/issues/detail?id\u003d11166",
      "parentUuid": "e22c1a52_9d3c2975",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eadbb88d_860b7f97",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-08-13T12:47:50Z",
      "side": 1,
      "message": "\u003e Yep, agreed,\n\u003e but we also decided[1] to hydrate that transition with some useful data (on the blueprint of reflog, similar to what message_log does).\n\u003e This is already in stable-2.16.\n\u003e \n\u003e Are you suggesting that we now remove that extra info and leave only \"SHA1, new SHA1 and the type (BLOB vs. COMMIT)\"?\n\nWe can keep the info we have about COMMIT, just BLOB should have less because there is no commit data to extract.\n\n\u003e Logging REF_UPDATE_BLOB does not require extra information, just less of it, I struggle to understand why we\u0027d want to remove useful information from REF_UPDATE_COMMIT, which is already there.\n\nWe can keep that, we are in agreement. Just I wouldn\u0027t like to add more info on the BLOB, just a couple of fields less.\n\nCan we get rid of the UPDATE_BLOB type, which is really misleading: this is a ref-update and should be called UPDATE_REF, just without commit info because it is a BLOB.",
      "parentUuid": "ad11c555_6703b3ab",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "83eb1781_297bf166",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T13:36:30Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "eadbb88d_860b7f97",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d1e16f68_5e071a38",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/SharedRefLogEntry.java",
        "patchSetId": 3
      },
      "lineNbr": 22,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-08-13T13:45:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "83eb1781_297bf166",
      "range": {
        "startLine": 22,
        "startChar": 4,
        "endLine": 22,
        "endChar": 15
      },
      "revId": "079586e04c1132e06f5b1ea6cd9c6bf8b840cb27",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}