{
  "comments": [
    {
      "key": {
        "uuid": "3d6fc151_f7dc44b2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/ProjectVersionRefUpdate.java",
        "patchSetId": 18
      },
      "lineNbr": 79,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-27T16:11:34Z",
      "side": 1,
      "message": "The idea behind this implementation is that:\n* if we are the the node producing the event (i.e.:!Context.isForwardedEvent()), as soon as a RefUpdatedEvent is intercepted, \n* if we are a replica node (i.e.:Context.isForwardedEvent()), as soon as we intercept a ChangeEvent, the refs/multi-site/project-version gets updated\n\nUpdate of the version skips the checks in the shared-ref db: https://gerrit-review.googlesource.com/c/plugins/multi-site/+/250392/18/src/main/java/com/googlesource/gerrit/plugins/multisite/validation/RefUpdateValidator.java#89",
      "range": {
        "startLine": 70,
        "startChar": 3,
        "endLine": 79,
        "endChar": 5
      },
      "revId": "245c6cd9751d8f9852d620cd279c03709e870b49",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc9bb3de_77db8243",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/validation/ProjectVersionRefUpdate.java",
        "patchSetId": 18
      },
      "lineNbr": 87,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-01-27T20:50:38Z",
      "side": 1,
      "message": "This update will trigger compareAndPut, which at the moment is expecting an ObjectId as value to set. I believe we will need to modify the shared-refdb implementation to allow to put different data types. For example for the versioning we want to put a long with the version value. The object ID won\u0027t be useful to retrieve the current version in master.",
      "range": {
        "startLine": 87,
        "startChar": 42,
        "endLine": 87,
        "endChar": 48
      },
      "revId": "245c6cd9751d8f9852d620cd279c03709e870b49",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    }
  ]
}