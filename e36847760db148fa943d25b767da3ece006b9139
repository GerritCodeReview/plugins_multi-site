{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f4b1509a_70b8f51f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-06-03T10:12:53Z",
      "side": 1,
      "message": "Why is the problem in 3.3 only ? Should it go in 3.2?",
      "revId": "e36847760db148fa943d25b767da3ece006b9139",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fce7e14a_17beff7b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-06-03T11:14:00Z",
      "side": 1,
      "message": "isn\u0027t this going to remove the slash from the json altogether?\n\nHow are we going to distinguish cache evictions for `foo/bar` from cache evictions for `foobar`?",
      "revId": "e36847760db148fa943d25b767da3ece006b9139",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b6865f3_3fbc39a6",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2021-06-03T13:08:32Z",
      "side": 1,
      "message": "Sorry, I just realized we are not stripping \"/\", but double quotes \".\nI am going to try to understand why.",
      "parentUuid": "fce7e14a_17beff7b",
      "revId": "e36847760db148fa943d25b767da3ece006b9139",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c36d364_85447421",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2021-06-03T13:21:03Z",
      "side": 1,
      "message": "I was trying to figure out the same. Looking at the tests, it doesn\u0027t seem like we are using a project containing double quotes, hence there is a discrepancy between the tests and the fix itself.\n\nCan a project have double quotes in the name? I don\u0027t think Gerrit would allow it.\n\nFurthermore, is it safe to assume that the Constants.PROJECTS case always receive a String? If so, we could even simplify this logic, the final serialization could be: `Project.nameKey(nullToEmpty(json))`",
      "parentUuid": "9b6865f3_3fbc39a6",
      "revId": "e36847760db148fa943d25b767da3ece006b9139",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c62577c_e5daa33b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1083454
      },
      "writtenOn": "2021-06-03T13:43:15Z",
      "side": 1,
      "message": "Issue is that json is a serialised string and Gson serialiser always adding quotes so if we do Gson.toJson(Project.nameKey(\"foo\")) string will look like this: \"\"foo\"\". Because it\u0027s not a valid Json we cannot deserialise it using Gson.fromJson(json) but we just cast it to string. But with casting we will still have quotes.",
      "parentUuid": "9b6865f3_3fbc39a6",
      "revId": "e36847760db148fa943d25b767da3ece006b9139",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}